@inherits RocketDirectoryAPI.Components.RocketDirectoryAPITokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI.Components;
@using RocketDirectoryAPI.Components;
@using Simplisity;
@using RazorEngine.Text;
@using RocketPortal.Components;
@using Rocket.AppThemes.Components;
@using System.Web;

@{
    var systemData = (SystemLimpet)Model.GetDataObject("systemdata");
    var moduleData = (ModuleContentLimpet)Model.GetDataObject("modulesettings");
    var portalData = (PortalLimpet)Model.GetDataObject("portaldata");
    var articleId = Model.SessionParamsData.GetInt("articleid");
    var articleData = (ArticleLimpet)Model.List.First();
    var sessionParams = Model.SessionParamsData;
    var moduleedit = sessionParams.GetBool("moduleedit");
    var appThemeAdmin = (AppThemeLimpet)Model.GetDataObject("appthemeadmin");

    AddProcessDataResx(appThemeAdmin, true);
    AddProcessData("resourcepath", systemData.SystemRelPath + "/App_LocalResources/");

}

<div class="w3-bar  w3-padding">
    @if (!moduleedit)
    {
        <div class="w3-padding w3-button w3-black simplisity_click" s-cmd="articleadmin_editlist" s-fields=''>@ButtonText(ButtonTypes.back)</div>
    }
    else
    {
        var urlparams = new Dictionary<string, string>();
        urlparams.Add("articleid", articleData.ArticleId.ToString());
        var rtnUrl = DNNrocketUtils.NavigateURL(sessionParams.TabId, urlparams, articleData.Name);
        <a href="@rtnUrl" class="w3-padding w3-button w3-black " style="text-decoration:none;" onclick="$('.simplisity_loader').show();">
            <span class="">
                @ButtonText(ButtonTypes.back)
            </span>
        </a>
    }
    <div class="w3-button w3-theme-action simplisity_click savearticlebutton langchangesave" s-before="articlerichtextSave" s-cmd="articleadmin_savedata" s-post="#articledatasection" s-list=".@articleData.ImageListName,.@articleData.DocumentListName,.@articleData.LinkListName" s-fields='{"articleid":"@articleData.ArticleId","tabid":"@(Model.SessionParamsData.TabId)","moduleedit":"@(moduleedit.ToString())"}'>@ButtonText(ButtonTypes.save)</div>

    @if (articleData.Exists)
    {
        <div class="w3-button simplisity_confirmclick" s-confirm="@ResourceKey("DNNrocket.copy")&nbsp;?" s-cmd="articleadmin_copy" s-fields='{"articleid":"@articleData.ArticleId"}'>@ButtonText(ButtonTypes.copy)</div>
    }
    <div class="w3-button w3-right w3-margin-right w3-red simplisity_confirmclick" s-confirm="@ResourceKey("DNNrocket.delete","","confirm")" s-cmd="articleadmin_delete" s-fields='{"articleid":"@articleData.ArticleId"}'>@ButtonText(ButtonTypes.delete)</div>
</div>
